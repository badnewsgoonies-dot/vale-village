
> vale-chronicles@1.0.0 test
> vitest run --coverage --run


[7m[1m[36m RUN [39m[22m[27m [36mv1.6.1[39m [90mC:/Dev/AiGames/Zzzzzzzzz/vale-chronicles[39m
[2m      Coverage enabled with [22m[33mv8[39m

 [32mâœ“[39m tests/unit/PartyManagement.test.ts [2m ([22m[2m39 tests[22m[2m)[22m[90m 25[2mms[22m[39m
 [32mâœ“[39m tests/unit/DjinnTeamAdvanced.test.ts [2m ([22m[2m22 tests[22m[2m)[22m[90m 16[2mms[22m[39m
 [32mâœ“[39m tests/unit/Unit.test.ts [2m ([22m[2m35 tests[22m[2m)[22m[90m 27[2mms[22m[39m
 [32mâœ“[39m tests/unit/DjinnTeam.test.ts [2m ([22m[2m29 tests[22m[2m)[22m[90m 35[2mms[22m[39m
 [32mâœ“[39m tests/unit/Battle.test.ts [2m ([22m[2m40 tests[22m[2m)[22m[90m 72[2mms[22m[39m
 [32mâœ“[39m tests/unit/Equipment.test.ts [2m ([22m[2m32 tests[22m[2m)[22m[90m 22[2mms[22m[39m
 [32mâœ“[39m tests/unit/BattleRewards.test.ts [2m ([22m[2m27 tests[22m[2m)[22m[90m 32[2mms[22m[39m
 [32mâœ“[39m tests/unit/Leveling.test.ts [2m ([22m[2m28 tests[22m[2m)[22m[90m 35[2mms[22m[39m
 [33mâ¯[39m tests/critical/SummonSystem.test.ts [2m ([22m[2m14 tests[22m [2m|[22m [31m11 failed[39m[2m)[22m[90m 96[2mms[22m[39m
[31m   [33mâ¯[31m tests/critical/SummonSystem.test.ts[2m > [22mCRITICAL: Summon System Mechanics[2m > [22mâœ… Titan summon (3 Venus Djinn) deals correct damage[39m
[31m     â†’ expected false to be true // Object.is equality[39m
[31m   [33mâ¯[31m tests/critical/SummonSystem.test.ts[2m > [22mCRITICAL: Summon System Mechanics[2m > [22mâœ… Phoenix summon (3 Mars Djinn) deals correct damage[39m
[31m     â†’ expected false to be true // Object.is equality[39m
[31m   [33mâ¯[31m tests/critical/SummonSystem.test.ts[2m > [22mCRITICAL: Summon System Mechanics[2m > [22mâœ… Kraken summon (3 Mercury Djinn) deals correct damage[39m
[31m     â†’ expected false to be true // Object.is equality[39m
[31m   [33mâ¯[31m tests/critical/SummonSystem.test.ts[2m > [22mCRITICAL: Summon System Mechanics[2m > [22mâœ… After summon, all 3 Djinn go to Recovery state[39m
[31m     â†’ expected [ Array(1) ] to have a length of 3 but got 1[39m
[31m   [33mâ¯[31m tests/critical/SummonSystem.test.ts[2m > [22mEDGE CASES: Summon System Failures[2m > [22mâŒ FAIL: Cannot summon with only 2 Djinn in Standby[39m
[31m     â†’ expected [ Array(1) ] to have a length of 2 but got 1[39m
[31m   [33mâ¯[31m tests/critical/SummonSystem.test.ts[2m > [22mEDGE CASES: Summon System Failures[2m > [22mâŒ FAIL: Cannot summon Titan with 3 Mars Djinn (wrong element)[39m
[31m     â†’ expected [ Array(1) ] to have a length of 3 but got 1[39m
[31m   [33mâ¯[31m tests/critical/SummonSystem.test.ts[2m > [22mEDGE CASES: Summon System Failures[2m > [22mâŒ FAIL: Cannot summon with mixed elements (2 Venus + 1 Mars)[39m
[31m     â†’ expected [ Array(1) ] to have a length of 3 but got 1[39m
[31m   [33mâ¯[31m tests/critical/SummonSystem.test.ts[2m > [22mCRITICAL: Summon Recovery Mechanics[2m > [22mâœ… Djinn return to Set after 3 turns in Recovery[39m
[31m     â†’ expected false to be true // Object.is equality[39m
[31m   [33mâ¯[31m tests/critical/SummonSystem.test.ts[2m > [22mBROKEN?: Summon System Exploits[2m > [22mEXPLOIT: What if caster has 0 MAG? (summon still works?)[39m
[31m     â†’ expected false to be true // Object.is equality[39m
[31m   [33mâ¯[31m tests/critical/SummonSystem.test.ts[2m > [22mBROKEN?: Summon System Exploits[2m > [22mEXPLOIT: What if caster has NEGATIVE MAG?[39m
[31m     â†’ expected false to be true // Object.is equality[39m
[31m   [33mâ¯[31m tests/critical/SummonSystem.test.ts[2m > [22mBROKEN?: Summon System Exploits[2m > [22mEXPLOIT: What if caster has MASSIVE MAG? (overflow?)[39m
[31m     â†’ expected false to be true // Object.is equality[39m
 [32mâœ“[39m tests/verification/SpecExamples.test.ts [2m ([22m[2m9 tests[22m[2m)[22m[90m 48[2mms[22m[39m
 [32mâœ“[39m tests/integration/GameLoopIntegration.test.ts [2m ([22m[2m9 tests[22m[2m)[22m[90m 37[2mms[22m[39m
 [32mâœ“[39m tests/unit/StatCalculation.test.ts [2m ([22m[2m24 tests[22m[2m)[22m[90m 44[2mms[22m[39m
 [33mâ¯[39m tests/gameplay/GameBalance.test.ts [2m ([22m[2m11 tests[22m [2m|[22m [31m5 failed[39m[2m)[22m[90m 27[2mms[22m[39m
[31m   [33mâ¯[31m tests/gameplay/GameBalance.test.ts[2m > [22mâš–ï¸ GAME BALANCE: Is Your Game Actually Fun?[2m > [22mâŒ CRITICAL: No unit should be 3Ã— stronger than another (OP check)[39m
[31m     â†’ expected 3.9375 to be less than 3[39m
[31m   [33mâ¯[31m tests/gameplay/GameBalance.test.ts[2m > [22mâš–ï¸ GAME BALANCE: Is Your Game Actually Fun?[2m > [22mâš ï¸ WARNING: Piers should be "tank" (low damage, high survivability)[39m
[31m     â†’ expected 40 to be less than 18[39m
[31m   [33mâ¯[31m tests/gameplay/GameBalance.test.ts[2m > [22mâš–ï¸ GAME BALANCE: Is Your Game Actually Fun?[2m > [22mðŸŽ® FUN CHECK: Leveling should feel MEANINGFUL (2Ã— power gain)[39m
[31m     â†’ expected 1.9565217391304348 to be greater than 2[39m
[31m   [33mâ¯[31m tests/gameplay/GameBalance.test.ts[2m > [22mðŸ’€ BROKEN GAME SCENARIOS: Things That Kill Fun[2m > [22mBORING: Are all units just stat blocks with no identity?[39m
[31m     â†’ expected 2 to be greater than 2[39m
[31m   [33mâ¯[31m tests/gameplay/GameBalance.test.ts[2m > [22mðŸ˜´ GRIND CHECK: Is progression fun or tedious?[2m > [22mGRIND: Does each level feel like progress? (unlock new abilities)[39m
[31m     â†’ expected 5 to be 2 // Object.is equality[39m
[90mstdout[2m | tests/gameplay/GameBalance.test.ts[2m > [22m[2mâš–ï¸ GAME BALANCE: Is Your Game Actually Fun?[2m > [22m[2mâŒ CRITICAL: No unit should be 3Ã— stronger than another (OP check)[22m[39m
Damage range: {
  min: [33m16[39m,
  max: [33m63[39m,
  ratio: [33m3.9375[39m,
  strongest: [32m'Felix'[39m,
  weakest: [32m'Kraden'[39m
}

[90mstdout[2m | tests/gameplay/GameBalance.test.ts[2m > [22m[2mâš–ï¸ GAME BALANCE: Is Your Game Actually Fun?[2m > [22m[2mâŒ CRITICAL: Every unit should be VIABLE (no "useless" units)[22m[39m
Isaac (Balanced): 2 strengths
Garet (Pure DPS): 2 strengths
Ivan (Mage): 3 strengths
Mia (Healer): 3 strengths
Felix (Rogue): 3 strengths
Jenna (Glass Cannon): 3 strengths
Sheba (Support): 3 strengths
Piers (Tank): 2 strengths
Kraden (Scholar): 2 strengths
Kyle (Warrior): 3 strengths

[90mstdout[2m | tests/gameplay/GameBalance.test.ts[2m > [22m[2mðŸ’€ BROKEN GAME SCENARIOS: Things That Kill Fun[2m > [22m[2mBROKEN: Does stacking 3 same-element Djinn trivialize content?[22m[39m
Djinn ATK boost: 44.4%

[90mstdout[2m | tests/gameplay/GameBalance.test.ts[2m > [22m[2mðŸ˜´ GRIND CHECK: Is progression fun or tedious?[2m > [22m[2mGRIND: Can reach Level 5 in reasonable time? (<20 battles)[22m[39m
Battles to L5: 19

 [32mâœ“[39m tests/integration/SystemIntegration.test.ts [2m ([22m[2m5 tests[22m[2m)[22m[90m 14[2mms[22m[39m
 [33mâ¯[39m tests/gameplay/EpicBattles.test.ts [2m ([22m[2m8 tests[22m [2m|[22m [31m4 failed[39m[2m)[22m[90m 29[2mms[22m[39m
[31m   [33mâ¯[31m tests/gameplay/EpicBattles.test.ts[2m > [22mðŸŽ® EPIC BATTLES: The Tests You SHOULD Have Written[2m > [22mâš”ï¸ EPIC: "Against All Odds" - Level 3 Party Defeats Level 5 Boss Through Strategy[39m
[31m     â†’ expected 'ongoing' to be 'victory' // Object.is equality[39m
[31m   [33mâ¯[31m tests/gameplay/EpicBattles.test.ts[2m > [22mðŸŽ® EPIC BATTLES: The Tests You SHOULD Have Written[2m > [22mðŸ›¡ï¸ EPIC: "Immovable Object" - Piers Tanks 20 Hits Without Dying[39m
[31m     â†’ PIERS is not defined[39m
[31m   [33mâ¯[31m tests/gameplay/EpicBattles.test.ts[2m > [22mðŸŽ® EPIC BATTLES: The Tests You SHOULD Have Written[2m > [22mðŸ’¥ EPIC: "Glass Cannon" - Jenna One-Shots Boss But Dies Next Turn[39m
[31m     â†’ JENNA is not defined[39m
[31m   [33mâ¯[31m tests/gameplay/EpicBattles.test.ts[2m > [22mðŸŽ­ DRAMATIC MOMENTS: What Makes Battles Memorable[2m > [22mDRAMA: "Pyrrhic Victory" - Win Battle But Entire Party at <10% HP[39m
[31m     â†’ expected 0.1 to be less than 0.1[39m
 [32mâœ“[39m tests/unit/Rng.test.ts [2m ([22m[2m18 tests[22m[2m)[22m[90m 157[2mms[22m[39m
[90mstdout[2m | tests/critical/UncoveredCode.test.ts[2m > [22m[2mCRITICAL: calculateStats() Edge Cases[2m > [22m[2mPerformance: calculateStats called 10,000 times[22m[39m
calculateStats 10k calls: 71.14ms

 [33mâ¯[39m tests/critical/UncoveredCode.test.ts [2m ([22m[2m22 tests[22m [2m|[22m [31m7 failed[39m[2m)[22m[90m 106[2mms[22m[39m
[31m   [33mâ¯[31m tests/critical/UncoveredCode.test.ts[2m > [22mCRITICAL: Equipment Edge Cases (78.37% coverage - missing 22%)[2m > [22mEquipment.ts lines 59-74: What happens with malformed equipment?[39m
[31m     â†’ Cannot convert undefined or null to object[39m
[31m   [33mâ¯[31m tests/critical/UncoveredCode.test.ts[2m > [22mCRITICAL: HP/PP Edge Cases[2m > [22mWhat if currentHp is set to negative?[39m
[31m     â†’ expected -50 to be greater than or equal to 0[39m
[31m   [33mâ¯[31m tests/critical/UncoveredCode.test.ts[2m > [22mCRITICAL: HP/PP Edge Cases[2m > [22mWhat if currentHp is set above maxHp?[39m
[31m     â†’ expected 999 to be less than or equal to 180[39m
[31m   [33mâ¯[31m tests/critical/UncoveredCode.test.ts[2m > [22mCRITICAL: HP/PP Edge Cases[2m > [22mWhat if heal amount is negative?[39m
[31m     â†’ expected -20 to be greater than or equal to 0[39m
[31m   [33mâ¯[31m tests/critical/UncoveredCode.test.ts[2m > [22mCRITICAL: HP/PP Edge Cases[2m > [22mWhat if unit is KO and we try to heal?[39m
[31m     â†’ expected 50 to be +0 // Object.is equality[39m
[31m   [33mâ¯[31m tests/critical/UncoveredCode.test.ts[2m > [22mCRITICAL: Djinn System Edge Cases[2m > [22mWhat if we equip the same Djinn twice?[39m
[31m     â†’ expected true to be false // Object.is equality[39m
[31m   [33mâ¯[31m tests/critical/UncoveredCode.test.ts[2m > [22mCRITICAL: Djinn System Edge Cases[2m > [22mWhat if we activate Djinn that was just activated?[39m
[31m     â†’ expected true to be false // Object.is equality[39m
 [32mâœ“[39m tests/unit/RngPureRand.test.ts [2m ([22m[2m23 tests[22m[2m)[22m[90m 175[2mms[22m[39m
[90mstdout[2m | tests/critical/StatsUtilities.test.ts[2m > [22m[2mPERFORMANCE: Stats Operations Are Fast[2m > [22m[2maddStats() called 100,000 times completes quickly[22m[39m
addStats 100k calls: 8.01ms

[90mstdout[2m | tests/critical/StatsUtilities.test.ts[2m > [22m[2mPERFORMANCE: Stats Operations Are Fast[2m > [22m[2mmultiplyStats() called 100,000 times completes quickly[22m[39m
multiplyStats 100k calls: 19.72ms

 [32mâœ“[39m tests/critical/StatsUtilities.test.ts [2m ([22m[2m17 tests[22m[2m)[22m[90m 37[2mms[22m[39m
 [32mâœ“[39m tests/unit/SeededRNG.test.ts [2m ([22m[2m12 tests[22m[2m)[22m[90m 35[2mms[22m[39m
 [32mâœ“[39m tests/quality/NoMagicNumbers.test.ts [2m ([22m[2m7 tests[22m[2m)[22m[90m 7[2mms[22m[39m

[2m Test Files [22m [1m[31m4 failed[39m[22m[2m | [22m[1m[32m17 passed[39m[22m[90m (21)[39m
[2m      Tests [22m [1m[31m27 failed[39m[22m[2m | [22m[1m[32m404 passed[39m[22m[90m (431)[39m
[2m   Start at [22m 19:11:15
[2m   Duration [22m 29.73s[2m (transform 2.26s, setup 332ms, collect 7.85s, tests 1.08s, environment 50.37s, prepare 12.50s)[22m

