# Mana Circle System - UI Mockup

## Visual Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MANA CIRCLES: â—â—â—â—â—â—â—â—‹â—‹â—‹  (6/10 available)                   â”‚
â”‚                                                                â”‚
â”‚  [Enemy Sprites]     [Enemy Sprites]     [Enemy Sprites]       â”‚
â”‚       ğŸ§™                 ğŸº                  ğŸ¦               â”‚
â”‚                                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    BATTLE FIELD                                â”‚
â”‚                                                                â”‚
â”‚                                                                â”‚
â”‚   [Your Party Sprites]                                         â”‚
â”‚   Isaac(HP:45/50)  Felix(HP:38/40)  Mia(HP:42/42)  Garet(HP:50/50) â”‚
â”‚    +2 mana         +3 mana          +2 mana         +3 mana    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ACTION QUEUE                  â”‚  COMMANDS (Isaac's Turn)       â”‚
â”‚ 40% width                     â”‚  60% width                     â”‚
â”‚                               â”‚                                â”‚
â”‚ 1. Isaac: METEOR [4â—‹]         â”‚  â”Œâ”€ ATTACK (0â—‹) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚    â†’ Target: Wolf             â”‚  â”‚ â”Œâ”€ ABILITIES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚                               â”‚  â”‚ â”‚ Fireball      [2â—‹]   â”‚    â”‚
â”‚ 2. Felix: ????                â”‚  â”‚ â”‚ Cure          [1â—‹]   â”‚    â”‚
â”‚                               â”‚  â”‚ â”‚ Meteor        [4â—‹]   â”‚    â”‚
â”‚ 3. Mia: ????                  â”‚  â”‚ â”‚ Ward          [2â—‹]   â”‚    â”‚
â”‚                               â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚    â”‚
â”‚                               â”‚  â”‚ â”Œâ”€ DJINN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚ 4. Garet: ????                â”‚  â”‚ â”‚ Forge (Ready) [0â—‹]   â”‚    â”‚
â”‚                               â”‚  â”‚ â”‚ Flash (CD:2)         â”‚    â”‚
â”‚                               â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚ [EXECUTE] (grayed out)        â”‚  [â† BACK] [TARGET â†’]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## After Queuing All 4 Actions

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MANA CIRCLES: â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹  (0/10 - all allocated)             â”‚
â”‚                                                                â”‚
â”‚  [Enemy Sprites]     [Enemy Sprites]     [Enemy Sprites]       â”‚
â”‚       ğŸ§™                 ğŸº                  ğŸ¦               â”‚
â”‚                                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    BATTLE FIELD                                â”‚
â”‚                                                                â”‚
â”‚                                                                â”‚
â”‚   [Your Party Sprites]                                         â”‚
â”‚   Isaac(HP:45/50)  Felix(HP:38/40)  Mia(HP:42/42)  Garet(HP:50/50) â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ACTION QUEUE                  â”‚  COMMANDS (All Set!)           â”‚
â”‚ 40% width                     â”‚  60% width                     â”‚
â”‚                               â”‚                                â”‚
â”‚ 1. Isaac: METEOR [4â—‹]         â”‚    READY TO EXECUTE            â”‚
â”‚    â†’ Target: Wolf             â”‚                                â”‚
â”‚                               â”‚    Mana Used: 10/10            â”‚
â”‚ 2. Felix: CURE [1â—‹]           â”‚                                â”‚
â”‚    â†’ Target: Isaac            â”‚    â€¢ Isaac: Meteor (4)         â”‚
â”‚                               â”‚    â€¢ Felix: Cure (1)           â”‚
â”‚ 3. Mia: ATTACK [0â—‹]           â”‚    â€¢ Mia: Attack (0)           â”‚
â”‚    â†’ Target: Mage             â”‚    â€¢ Garet: Ragnarok (5)       â”‚
â”‚                               â”‚                                â”‚
â”‚ 4. Garet: RAGNAROK [5â—‹]       â”‚    âš ï¸ OVER BUDGET!             â”‚
â”‚    â†’ Target: Lizard           â”‚    Need to adjust actions      â”‚
â”‚                               â”‚                                â”‚
â”‚ [EXECUTE] (RED - over budget!)â”‚  [EDIT] [CLEAR ALL]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Budget Validation Example (Fixed)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MANA CIRCLES: â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹  (0/10 - all allocated)             â”‚
â”‚                                                                â”‚
â”‚  [Enemy Sprites]     [Enemy Sprites]     [Enemy Sprites]       â”‚
â”‚       ğŸ§™                 ğŸº                  ğŸ¦               â”‚
â”‚                                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    BATTLE FIELD                                â”‚
â”‚                                                                â”‚
â”‚   [Your Party Sprites]                                         â”‚
â”‚   Isaac(HP:45/50)  Felix(HP:38/40)  Mia(HP:42/42)  Garet(HP:50/50) â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ACTION QUEUE                  â”‚  COMMANDS (All Set!)           â”‚
â”‚ 40% width                     â”‚  60% width                     â”‚
â”‚                               â”‚                                â”‚
â”‚ 1. Isaac: METEOR [4â—‹]         â”‚    âœ“ READY TO EXECUTE          â”‚
â”‚    â†’ Target: Wolf             â”‚                                â”‚
â”‚                               â”‚    Mana Used: 10/10            â”‚
â”‚ 2. Felix: CURE [1â—‹]           â”‚                                â”‚
â”‚    â†’ Target: Isaac            â”‚    Actions queued:             â”‚
â”‚                               â”‚    â€¢ Isaac: Meteor (4)         â”‚
â”‚ 3. Mia: ATTACK [0â—‹]           â”‚    â€¢ Felix: Cure (1)           â”‚
â”‚    â†’ Target: Mage             â”‚    â€¢ Mia: Attack (0)           â”‚
â”‚                               â”‚    â€¢ Garet: Earthquake (5)     â”‚
â”‚ 4. Garet: EARTHQUAKE [5â—‹]     â”‚                                â”‚
â”‚    â†’ Target: All Enemies      â”‚                                â”‚
â”‚                               â”‚                                â”‚
â”‚ [EXECUTE] âœ“ (GLOWING GREEN)   â”‚  [EDIT] [CLEAR ALL]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Execution Phase (Animated)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MANA CIRCLES: â—â—â—â—â—â—â—â—â—â—  (10/10 - REFRESHED!)               â”‚
â”‚                                                                â”‚
â”‚  [Enemy Sprites with damage numbers]                           â”‚
â”‚       ğŸ§™-45        ğŸº-78         ğŸ¦-52                        â”‚
â”‚                                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    BATTLE FIELD                                â”‚
â”‚   (Abilities animating)                                        â”‚
â”‚                                                                â”‚
â”‚   [Your Party Sprites]                                         â”‚
â”‚   Isaac(HP:45/50)  Felix(HP:38/40)  Mia(HP:42/42)  Garet(HP:50/50) â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   COMBAT LOG (100% width)                      â”‚
â”‚                                                                â”‚
â”‚  Turn 3 - Execution Phase                                      â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚
â”‚  â†’ Isaac casts METEOR on Wolf!                                 â”‚
â”‚     Wolf takes 78 damage!                                      â”‚
â”‚                                                                â”‚
â”‚  â†’ Felix casts CURE on Isaac!                                  â”‚
â”‚     Isaac recovers 15 HP!                                      â”‚
â”‚                                                                â”‚
â”‚  â†’ Mia attacks Mage!                                           â”‚
â”‚     Mage takes 22 damage!                                      â”‚
â”‚                                                                â”‚
â”‚  â†’ Garet casts EARTHQUAKE on all enemies!                      â”‚
â”‚     Mage takes 45 damage!                                      â”‚
â”‚     Wolf takes 32 damage! (Wolf defeated!)                     â”‚
â”‚     Lizard takes 52 damage!                                    â”‚
â”‚                                                                â”‚
â”‚  [Enemy Turn...]                                               â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Mana Circle Visual Design

### Option A: Top Bar (Horizontal)
```
TEAM MANA: â—â—â—â—â—â—â—â—‹â—‹â—‹  (6/10 available)
```

### Option B: Vertical Side Panel
```
â”Œâ”€â”€â”€â”€â”€â”
â”‚  M  â”‚
â”‚  A  â”‚
â”‚  N  â”‚
â”‚  A  â”‚
â”‚     â”‚
â”‚  â—  â”‚ 10
â”‚  â—  â”‚ 9
â”‚  â—  â”‚ 8
â”‚  â—  â”‚ 7
â”‚  â—  â”‚ 6
â”‚  â—  â”‚ 5
â”‚  â—‹  â”‚ 4
â”‚  â—‹  â”‚ 3
â”‚  â—‹  â”‚ 2
â”‚  â—‹  â”‚ 1
â””â”€â”€â”€â”€â”€â”˜
```

### Option C: Compact Circles with Numbers
```
MANA: â—â—â—â—â—â—â—â—‹â—‹â—‹ 7/10
```

## Ability Cost Display

```
â”Œâ”€ ABILITIES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Fireball      [2â—‹]  â†â”€â”€  â”‚ Cost shown as circles
â”‚ Cure          [1â—‹]       â”‚
â”‚ Meteor        [4â—‹â—‹â—‹â—‹]    â”‚ Or filled circles
â”‚ Ward          [2â—‹]       â”‚
â”‚ Ragnarok      [5â—‹] (!)   â”‚ Red if can't afford
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Unit Contribution Display

During team setup or character info:
```
â”Œâ”€ ISAAC â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ HP: 50/50                â”‚
â”‚ Class: Squire            â”‚
â”‚ Mana Contribution: +2â—‹   â”‚  â† Shows base contribution
â”‚                          â”‚
â”‚ Equipment:               â”‚
â”‚  Weapon: Sol Blade (+1â—‹) â”‚  â† Items can add mana
â”‚  Armor: Dragon Mail      â”‚
â”‚  Helm: --                â”‚
â”‚                          â”‚
â”‚ Total Contribution: +3â—‹  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Example Team Compositions

### Balanced Team (8 mana)
- Isaac (Squire): +2â—‹
- Felix (Warrior): +2â—‹
- Mia (Healer): +2â—‹
- Garet (Tank): +2â—‹
- **Total: 8â—‹** - Can afford one 4-cost spell + several 1-2 cost

### Glass Cannon Team (12 mana)
- Isaac (Sage): +3â—‹
- Felix (Mage): +4â—‹
- Mia (Priest): +3â—‹
- Garet (Pyromancer): +2â—‹
- **Total: 12â—‹** - Can spam multiple big spells, but squishy

### Tank Team (5 mana)
- Four heavy armor units at +1â—‹ each
- **Total: 5â—‹** - Limited abilities, relies on basic attacks

## Tactical Examples

### Turn 1: Aggressive Opener (10 mana total)
```
1. Isaac: METEOR [4â—‹] â†’ Boss
2. Felix: ATTACK [0â—‹] â†’ Adds
3. Mia: WARD [2â—‹] â†’ Team (defense buff)
4. Garet: EARTHQUAKE [4â—‹] â†’ All enemies
Total: 10â—‹ used âœ“
```

### Turn 2: Recovery Turn (10 mana total)
```
1. Isaac: ATTACK [0â—‹] â†’ Boss
2. Felix: ATTACK [0â—‹] â†’ Boss
3. Mia: CURE [1â—‹] â†’ Isaac
4. Garet: HEAL WAVE [3â—‹] â†’ All allies
Total: 4â—‹ used (6â—‹ wasted - sometimes you don't need all mana!)
```

### Turn 3: Impossible Choice (10 mana total)
```
Want: METEOR [4â—‹] + RAGNAROK [5â—‹] + CURE [1â—‹] = 10â—‹
But only 4 units, so must choose:
- Big damage: Meteor + Ragnarok + 2 attacks (0â—‹)
- Sustainable: Meteor + Cure + smaller spells (2â—‹ abilities)
```

## Implementation Notes

### Data Structure
```typescript
interface Unit {
  // ... existing fields
  manaContribution: number; // Base mana circles this unit provides
}

interface BattleState {
  // ... existing fields
  totalManaPool: number;      // Sum of all 4 units' contributions
  remainingMana: number;      // Decreases as actions queued
  queuedActions: QueuedAction[];
}

interface QueuedAction {
  unitId: string;
  abilityId: string | null;  // null = basic attack (0 cost)
  targetId: string;
  manaCost: number;
}

interface Ability {
  // ... existing fields
  manaCost: number;  // 0-4+ circles
}
```

### Validation Logic
```typescript
function canQueueAction(ability: Ability, remainingMana: number): boolean {
  return ability.manaCost <= remainingMana;
}

function isQueueComplete(): boolean {
  return queuedActions.length === 4 &&
         totalManaCost <= totalManaPool;
}
```

### Visual States
- **Available mana:** Filled circles (â—) with bright color
- **Spent mana:** Empty circles (â—‹) with dim color
- **Ability costs:** Show circles next to each ability
- **Over budget:** Red highlight on Execute button
- **Valid queue:** Green glow on Execute button
