.battle-transition-container {
  width: 100%;
  height: 480px;
  position: relative;
  overflow: hidden;
  background: #000;
}

/* Overworld scene */
.transition-overworld {
  position: absolute;
  inset: 0;
  background: linear-gradient(180deg,
    var(--color-grass-light) 0%,
    var(--color-grass-mid) 50%,
    var(--color-grass-dark) 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  animation: overworld-hold 1s forwards, fade-out 0.3s 0.7s forwards;
  z-index: 4;
}

@keyframes overworld-hold {
  0%, 70% { opacity: 1; }
  100% { opacity: 1; }
}

@keyframes fade-out {
  to { opacity: 0; }
}

.overworld-player {
  width: 48px;
  height: 48px;
  background: var(--color-text-gold);
  border: 3px solid var(--color-border-dark);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24px;
  filter: drop-shadow(0 6px 8px rgba(0, 0, 0, 0.5));
}

/* Swirl transition */
.transition-swirl {
  position: absolute;
  inset: 0;
  z-index: 3;
  opacity: 0;
  animation: swirl-sequence 1s 0.7s forwards;
}

@keyframes swirl-sequence {
  0% { opacity: 0; }
  10% { opacity: 1; }
  90% { opacity: 1; }
  100% { opacity: 0; }
}

.swirl-layer-1 {
  position: absolute;
  inset: 0;
  background:
    conic-gradient(from 0deg at center,
      transparent 0deg,
      rgba(255, 255, 255, 0.4) 45deg,
      transparent 90deg,
      rgba(255, 255, 255, 0.3) 135deg,
      transparent 180deg,
      rgba(255, 255, 255, 0.4) 225deg,
      transparent 270deg,
      rgba(255, 255, 255, 0.3) 315deg,
      transparent 360deg);
  animation: rotate-swirl-1 1s linear;
}

@keyframes rotate-swirl-1 {
  from { transform: rotate(0deg) scale(1.5); }
  to { transform: rotate(1080deg) scale(0.05); }
}

.swirl-layer-2 {
  position: absolute;
  inset: 0;
  background:
    radial-gradient(ellipse at center,
      transparent 0%,
      transparent 15%,
      rgba(255, 255, 255, 0.15) 25%,
      transparent 35%,
      rgba(255, 255, 255, 0.15) 45%,
      transparent 55%,
      rgba(255, 255, 255, 0.15) 65%,
      transparent 75%,
      rgba(255, 255, 255, 0.1) 85%,
      transparent 95%);
  animation: spiral-rotate 1s ease-in;
}

@keyframes spiral-rotate {
  from {
    transform: rotate(0deg) scale(4);
    opacity: 1;
  }
  to {
    transform: rotate(1440deg) scale(0.1);
    opacity: 0;
  }
}

/* Fade to black */
.transition-fade {
  position: absolute;
  inset: 0;
  background: #000;
  z-index: 2;
  opacity: 0;
  animation: fade-to-black 0.3s 1.5s forwards;
}

@keyframes fade-to-black {
  to { opacity: 1; }
}

/* Battle screen */
.transition-battle {
  position: absolute;
  inset: 0;
  background: linear-gradient(180deg, #1a2540 0%, #0a1530 100%);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: var(--space-lg);
  z-index: 1;
  opacity: 0;
  animation: battle-fade-in 0.5s 1.8s forwards;
}

@keyframes battle-fade-in {
  from {
    opacity: 0;
    transform: scale(1.1);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.battle-title {
  font-size: var(--font-size-lg);
  color: var(--color-text-gold);
  text-shadow: var(--shadow-text);
  animation: text-glow 1s ease-in-out infinite;
}

@keyframes text-glow {
  0%, 100% { text-shadow: var(--shadow-text); }
  50% { text-shadow: var(--shadow-text), 0 0 20px var(--color-text-gold); }
}

.battle-enemies {
  display: flex;
  gap: var(--space-lg);
}

.enemy-sprite {
  width: 48px;
  height: 48px;
  background: var(--color-mars);
  border: 2px solid var(--color-border-dark);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20px;
  filter: drop-shadow(0 6px 8px rgba(0, 0, 0, 0.5));
  animation: enemy-appear 0.3s ease-out backwards;
}

.enemy-sprite:nth-child(1) {
  animation-delay: 2s;
}

.enemy-sprite:nth-child(2) {
  animation-delay: 2.1s;
}

.enemy-sprite:nth-child(3) {
  animation-delay: 2.2s;
}

@keyframes enemy-appear {
  from {
    opacity: 0;
    transform: translateY(-30px) scale(0.5);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* Accessibility: Reduced motion */
@media (prefers-reduced-motion: reduce) {
  .transition-overworld,
  .transition-swirl,
  .transition-fade,
  .transition-battle,
  .swirl-layer-1,
  .swirl-layer-2,
  .enemy-sprite {
    animation: none !important;
  }

  .transition-battle {
    opacity: 1;
  }
}
