<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Battle Transition - Vale Chronicles</title>

  <!-- Google Font: Press Start 2P (GBA-style) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="tokens.css">

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: #000;
      font-family: var(--font-primary), var(--font-fallback);
      color: var(--color-text-primary);
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      overflow: hidden;
    }

    .demo-container {
      text-align: center;
      padding: var(--space-xl);
    }

    .demo-title {
      color: var(--color-text-gold);
      font-size: var(--font-size-sm);
      text-shadow: var(--shadow-text);
      margin-bottom: var(--space-xl);
    }

    /* ===== TRANSITION STAGES PREVIEW ===== */
    .stages-preview {
      display: flex;
      gap: var(--space-lg);
      justify-content: center;
      margin-bottom: var(--space-xxl);
      flex-wrap: wrap;
    }

    .stage {
      width: 240px;
      text-align: center;
    }

    .stage-label {
      font-size: 8px;
      color: var(--color-text-gold);
      text-shadow: var(--shadow-text);
      margin-bottom: var(--space-sm);
    }

    .stage-frame {
      width: 240px;
      height: 160px;
      border: 2px solid var(--color-border-light);
      position: relative;
      overflow: hidden;
      background: #000;
    }

    /* Stage 1: Overworld */
    .stage-overworld {
      background: linear-gradient(180deg,
        var(--color-grass-light) 0%,
        var(--color-grass-mid) 50%,
        var(--color-grass-dark) 100%);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .player-sprite {
      width: 32px;
      height: 32px;
      background: var(--color-text-gold);
      border: 2px solid var(--color-border-dark);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
      filter: drop-shadow(0 4px 4px rgba(0, 0, 0, 0.5));
    }

    /* Stage 2: Swirl Effect */
    .stage-swirl {
      background: radial-gradient(circle at center,
        transparent 0%,
        transparent 30%,
        rgba(255, 255, 255, 0.1) 50%,
        rgba(0, 0, 0, 0.8) 70%,
        #000 100%);
      position: relative;
    }

    .swirl-overlay {
      position: absolute;
      inset: 0;
      background:
        conic-gradient(from 0deg at center,
          transparent 0deg,
          rgba(255, 255, 255, 0.3) 60deg,
          transparent 120deg,
          rgba(255, 255, 255, 0.2) 180deg,
          transparent 240deg,
          rgba(255, 255, 255, 0.3) 300deg,
          transparent 360deg);
      animation: rotate-swirl 1s linear;
    }

    @keyframes rotate-swirl {
      from { transform: rotate(0deg) scale(1); }
      to { transform: rotate(720deg) scale(0.1); }
    }

    .swirl-spiral {
      position: absolute;
      inset: 0;
      background:
        radial-gradient(ellipse at center,
          transparent 0%,
          transparent 20%,
          rgba(255, 255, 255, 0.1) 30%,
          transparent 40%,
          rgba(255, 255, 255, 0.1) 50%,
          transparent 60%,
          rgba(255, 255, 255, 0.1) 70%,
          transparent 80%);
      animation: spiral-in 1s ease-in;
    }

    @keyframes spiral-in {
      from {
        transform: rotate(0deg) scale(3);
        opacity: 1;
      }
      to {
        transform: rotate(1080deg) scale(0.1);
        opacity: 0;
      }
    }

    /* Stage 3: Fade to Black */
    .stage-fade {
      background: #000;
      animation: pulse-fade 1s ease-in-out;
    }

    @keyframes pulse-fade {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }

    /* Stage 4: Battle Screen Fade-In */
    .stage-battle {
      background: linear-gradient(180deg, #1a2540 0%, #0a1530 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      animation: fade-in-battle 0.5s ease-out 0.5s forwards;
    }

    @keyframes fade-in-battle {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .battle-text {
      font-size: var(--font-size-sm);
      color: var(--color-text-gold);
      text-shadow: var(--shadow-text);
    }

    /* ===== LIVE DEMO ANIMATION ===== */
    .live-demo {
      width: var(--scale-3x);
      max-width: 100%;
      margin: 0 auto;
    }

    .demo-screen {
      width: 100%;
      height: 480px;
      border: 3px solid var(--color-border-light);
      border-right-color: var(--color-border-dark);
      border-bottom-color: var(--color-border-dark);
      box-shadow: var(--shadow-panel);
      position: relative;
      overflow: hidden;
      background: #000;
    }

    .demo-controls {
      margin-top: var(--space-lg);
      display: flex;
      gap: var(--space-md);
      justify-content: center;
    }

    .demo-btn {
      background: var(--color-bg-panel);
      border: 2px solid var(--color-border-light);
      border-right-color: var(--color-border-dark);
      border-bottom-color: var(--color-border-dark);
      color: var(--color-text-primary);
      font-family: var(--font-primary), var(--font-fallback);
      font-size: var(--font-size-xs);
      padding: var(--space-sm) var(--space-md);
      cursor: pointer;
      transition: all var(--timing-fast);
      text-shadow: var(--shadow-text);
    }

    .demo-btn:hover {
      background: var(--color-border-light);
      transform: translateY(-2px);
    }

    .demo-btn:active {
      transform: translateY(0);
    }

    .demo-btn:focus {
      outline: 3px solid var(--color-border-highlight);
      outline-offset: 2px;
    }

    /* ===== TRANSITION ANIMATION SEQUENCE ===== */

    /* Overworld scene */
    .transition-overworld {
      position: absolute;
      inset: 0;
      background: linear-gradient(180deg,
        var(--color-grass-light) 0%,
        var(--color-grass-mid) 50%,
        var(--color-grass-dark) 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      animation: overworld-hold 1s forwards, fade-out 0.3s 0.7s forwards;
      z-index: 4;
    }

    @keyframes overworld-hold {
      0%, 70% { opacity: 1; }
      100% { opacity: 1; }
    }

    @keyframes fade-out {
      to { opacity: 0; }
    }

    .overworld-player {
      width: 48px;
      height: 48px;
      background: var(--color-text-gold);
      border: 3px solid var(--color-border-dark);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      filter: drop-shadow(0 6px 8px rgba(0, 0, 0, 0.5));
    }

    /* Swirl transition */
    .transition-swirl {
      position: absolute;
      inset: 0;
      z-index: 3;
      opacity: 0;
      animation: swirl-sequence 1s 0.7s forwards;
    }

    @keyframes swirl-sequence {
      0% { opacity: 0; }
      10% { opacity: 1; }
      90% { opacity: 1; }
      100% { opacity: 0; }
    }

    .swirl-layer-1 {
      position: absolute;
      inset: 0;
      background:
        conic-gradient(from 0deg at center,
          transparent 0deg,
          rgba(255, 255, 255, 0.4) 45deg,
          transparent 90deg,
          rgba(255, 255, 255, 0.3) 135deg,
          transparent 180deg,
          rgba(255, 255, 255, 0.4) 225deg,
          transparent 270deg,
          rgba(255, 255, 255, 0.3) 315deg,
          transparent 360deg);
      animation: rotate-swirl-1 1s linear;
    }

    @keyframes rotate-swirl-1 {
      from { transform: rotate(0deg) scale(1.5); }
      to { transform: rotate(1080deg) scale(0.05); }
    }

    .swirl-layer-2 {
      position: absolute;
      inset: 0;
      background:
        radial-gradient(ellipse at center,
          transparent 0%,
          transparent 15%,
          rgba(255, 255, 255, 0.15) 25%,
          transparent 35%,
          rgba(255, 255, 255, 0.15) 45%,
          transparent 55%,
          rgba(255, 255, 255, 0.15) 65%,
          transparent 75%,
          rgba(255, 255, 255, 0.1) 85%,
          transparent 95%);
      animation: spiral-rotate 1s ease-in;
    }

    @keyframes spiral-rotate {
      from {
        transform: rotate(0deg) scale(4);
        opacity: 1;
      }
      to {
        transform: rotate(1440deg) scale(0.1);
        opacity: 0;
      }
    }

    /* Fade to black */
    .transition-fade {
      position: absolute;
      inset: 0;
      background: #000;
      z-index: 2;
      opacity: 0;
      animation: fade-to-black 0.3s 1.5s forwards;
    }

    @keyframes fade-to-black {
      to { opacity: 1; }
    }

    /* Battle screen */
    .transition-battle {
      position: absolute;
      inset: 0;
      background: linear-gradient(180deg, #1a2540 0%, #0a1530 100%);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: var(--space-lg);
      z-index: 1;
      opacity: 0;
      animation: battle-fade-in 0.5s 1.8s forwards;
    }

    @keyframes battle-fade-in {
      from {
        opacity: 0;
        transform: scale(1.1);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    .battle-title {
      font-size: var(--font-size-lg);
      color: var(--color-text-gold);
      text-shadow: var(--shadow-text);
      animation: text-glow 1s ease-in-out infinite;
    }

    @keyframes text-glow {
      0%, 100% { text-shadow: var(--shadow-text); }
      50% { text-shadow: var(--shadow-text), 0 0 20px var(--color-text-gold); }
    }

    .battle-enemies {
      display: flex;
      gap: var(--space-lg);
    }

    .enemy-sprite {
      width: 48px;
      height: 48px;
      background: var(--color-mars);
      border: 2px solid var(--color-border-dark);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      filter: drop-shadow(0 6px 8px rgba(0, 0, 0, 0.5));
      animation: enemy-appear 0.3s ease-out backwards;
    }

    .enemy-sprite:nth-child(1) {
      animation-delay: 2s;
    }

    .enemy-sprite:nth-child(2) {
      animation-delay: 2.1s;
    }

    .enemy-sprite:nth-child(3) {
      animation-delay: 2.2s;
    }

    @keyframes enemy-appear {
      from {
        opacity: 0;
        transform: translateY(-30px) scale(0.5);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    /* Accessibility: Reduced motion */
    @media (prefers-reduced-motion: reduce) {
      .transition-overworld,
      .transition-swirl,
      .transition-fade,
      .transition-battle,
      .swirl-layer-1,
      .swirl-layer-2,
      .enemy-sprite {
        animation: none !important;
      }

      .transition-battle {
        opacity: 1;
      }

      .stage-frame * {
        animation: none !important;
      }
    }

    /* Timer display */
    .timer {
      position: absolute;
      bottom: var(--space-md);
      right: var(--space-md);
      background: var(--color-bg-panel);
      border: 2px solid var(--color-border-light);
      padding: var(--space-xs) var(--space-sm);
      font-size: 8px;
      color: var(--color-text-gold);
      text-shadow: var(--shadow-text);
      z-index: 100;
    }
  </style>
</head>
<body>
  <div class="demo-container">

    <h1 class="demo-title">BATTLE TRANSITION MOCKUP</h1>

    <!-- STAGES PREVIEW -->
    <div class="stages-preview">

      <!-- Stage 1 -->
      <div class="stage">
        <div class="stage-label">1. OVERWORLD (0.0s - 0.7s)</div>
        <div class="stage-frame stage-overworld">
          <div class="player-sprite">I</div>
        </div>
      </div>

      <!-- Stage 2 -->
      <div class="stage">
        <div class="stage-label">2. SWIRL (0.7s - 1.7s)</div>
        <div class="stage-frame stage-swirl">
          <div class="swirl-overlay"></div>
          <div class="swirl-spiral"></div>
        </div>
      </div>

      <!-- Stage 3 -->
      <div class="stage">
        <div class="stage-label">3. FADE (1.5s - 1.8s)</div>
        <div class="stage-frame stage-fade"></div>
      </div>

      <!-- Stage 4 -->
      <div class="stage">
        <div class="stage-label">4. BATTLE (1.8s+)</div>
        <div class="stage-frame stage-battle">
          <div class="battle-text">BATTLE!</div>
        </div>
      </div>

    </div>

    <!-- LIVE DEMO -->
    <div class="live-demo">

      <div class="demo-screen">

        <!-- Timer -->
        <div class="timer">Total: ~2.3s</div>

        <!-- Overworld Layer -->
        <div class="transition-overworld">
          <div class="overworld-player">I</div>
        </div>

        <!-- Swirl Layer -->
        <div class="transition-swirl">
          <div class="swirl-layer-1"></div>
          <div class="swirl-layer-2"></div>
        </div>

        <!-- Fade Layer -->
        <div class="transition-fade"></div>

        <!-- Battle Layer -->
        <div class="transition-battle">
          <div class="battle-title">BATTLE START!</div>
          <div class="battle-enemies" role="img" aria-label="Three enemies appear">
            <div class="enemy-sprite">E1</div>
            <div class="enemy-sprite">E2</div>
            <div class="enemy-sprite">E3</div>
          </div>
        </div>

      </div>

      <!-- Controls -->
      <div class="demo-controls">
        <button class="demo-btn" onclick="location.reload()" aria-label="Replay transition animation">
          REPLAY ANIMATION
        </button>
      </div>

    </div>

  </div>
</body>
</html>
